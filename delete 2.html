

<script type="module">
  // ✅ Modular Firebase SDK imports
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc, collection } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";

  // ✅ Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyA36b4yGnT6k620PHwRupLgoykeGML2_j4",
    authDomain: "voxelvale-fec75.firebaseapp.com",
    projectId: "voxelvale-fec75",
    storageBucket: "voxelvale-fec75.firebasestorage.app",
    messagingSenderId: "290314560027",
    appId: "1:290314560027:web:9478b33ec2aa6ffcb00ebe",
    measurementId: "G-DVMHH5L9SL"
  };

  // ✅ Initialize app + services
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // ✅ Example: Sign up
  async function signUp(email, password) {
    const userCred = await createUserWithEmailAndPassword(auth, email, password);
    console.log("Signed up as:", userCred.user.uid);
  }

  // ✅ Example: Save world data
  async function saveWorld(worldData) {
    const uid = auth.currentUser.uid;
    const ref = doc(collection(db, "users", uid, "worlds"), "world1");
    await setDoc(ref, {
      data: worldData,
      lastSaved: new Date().toISOString()
    });
    console.log("World saved!");
  }

  // ✅ Example: Load world data
  async function loadWorld() {
    const uid = auth.currentUser.uid;
    const ref = doc(collection(db, "users", uid, "worlds"), "world1");
    const snapshot = await getDoc(ref);
    if (snapshot.exists()) {
      console.log("World loaded:", snapshot.data().data);
    } else {
      console.log("No saved world found.");
    }
  }

  // Example auth state change listener
  onAuthStateChanged(auth, user => {
    if (user) {
      console.log("User is logged in:", user.uid);
      // Optionally auto-load world
      // loadWorld();
    } else {
      console.log("User is logged out.");
    }
  });
</script>






<script>
  function signUp() {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('password').value;
    auth.createUserWithEmailAndPassword(email, pass)
      .then(user => alert("Signed up: " + user.user.email))
      .catch(err => alert(err.message));
  }

  function logIn() {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('password').value;
    auth.signInWithEmailAndPassword(email, pass)
      .then(user => alert("Logged in: " + user.user.email))
      .catch(err => alert(err.message));
  }

  function logOut() {
    auth.signOut().then(() => alert("Logged out"));
  }

  auth.onAuthStateChanged(user => {
    if (user) {
      console.log("User signed in:", user.uid);
      // You can now load or save data for this user!
    } else {
      console.log("No user signed in");
    }
  });
</script>

<div id="status">Checking auth status...</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";

  const firebaseConfig = { /* your config */ };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // ✅ Monitor sign-in state
  onAuthStateChanged(auth, user => {
    const statusDiv = document.getElementById("status");
    if (user) {
      statusDiv.textContent = `✅ Signed in as: ${user.email}`;
    } else {
      statusDiv.textContent = "❌ Not signed in.";
    }
  });
</script>































